# 生成式智能体持久化记忆

这个示例展示了如何使用FAISS向量存储来持久化生成式智能体的记忆，使得智能体在重新启动后能够保留之前的经历和学习。

## 功能特性

- **持久化记忆**: 使用FAISS向量存储将智能体的记忆保存到本地文件
- **自动加载**: 程序启动时自动检测并加载已存在的记忆文件
- **定期保存**: 在智能体经历重要事件时自动保存记忆
- **多智能体支持**: 每个智能体都有独立的记忆存储文件夹

## 文件结构

运行程序后，会在项目根目录下创建以下文件结构：

```
agent_memories/
├── Tommie/
│   ├── faiss.index
│   ├── docstore.json
│   └── args.json
└── Eve/
    ├── faiss.index
    ├── docstore.json
    └── args.json
```

## 使用方法

### 首次运行
```bash
npm run start
# 或
yarn start
```

首次运行时，程序会：
1. 为每个智能体创建新的记忆存储
2. 在模拟过程中积累记忆
3. 定期保存记忆到本地文件
4. 在程序结束时保存最终状态

### 后续运行
再次运行相同的程序时，智能体会：
1. 自动检测并加载之前保存的记忆
2. 基于已有记忆继续学习和互动
3. 保持之前的经历和个性发展

## 记忆管理

### 自动保存时机
- 每20个观察后自动保存
- 程序正常结束时保存
- 可以根据需要调整保存频率

### 手动清理记忆
如果需要重置智能体记忆，删除对应的文件夹即可：
```bash
rm -rf agent_memories/Tommie
rm -rf agent_memories/Eve
```

### 备份记忆
可以简单地复制整个`agent_memories`文件夹来备份智能体记忆：
```bash
cp -r agent_memories agent_memories_backup
```

## 技术实现

- **向量存储**: 使用FAISS (Facebook AI Similarity Search) 进行高效的向量相似性搜索
- **嵌入模型**: 使用OpenAI的嵌入模型生成文本向量
- **时间权重**: 结合时间衰减和重要性评分的检索策略

## 注意事项

1. **OpenAI API密钥**: 确保设置了有效的OpenAI API密钥
2. **存储空间**: 记忆文件会随着智能体经历的增加而增长
3. **兼容性**: 确保使用相同版本的LangChain和嵌入模型来保持兼容性
4. **性能**: FAISS提供了比内存存储更好的性能和可扩展性

## 扩展功能

可以进一步扩展的功能：
- 记忆压缩和清理策略
- 多版本记忆管理
- 记忆共享机制
- 记忆分析和可视化工具